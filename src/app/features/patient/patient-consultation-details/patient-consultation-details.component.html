<p class="alert alert-success">
  Consultatie pacient <b>{{ patient?.email }}</b>
</p>

<form
  class="mt-3 col-md-8"
  *ngIf="patient"
  (ngSubmit)="onSave()"
  [formGroup]="form"
>
  <div class="form-row">
    <label class="col-md-2 col-form-label form-control-sm">Motiv</label>
    <div class="form-group col-md-10">
      <textarea
        class="form-control form-control-sm"
        placeholder="Motiv"
        formControlName="reason"
        [class]="isValidField('reason')"
        #reason
      >
      </textarea>
      <div class="invalid-feedback">
        <span *ngIf="form.get('reason').errors?.required">
          Câmpul este obligatoriu!
        </span>
      </div>
    </div>
  </div>

  <div class="form-row">
    <label class="col-md-2 col-form-label form-control-sm">Simptome</label>
    <div class="form-group col-md-10">
      <textarea
        class="form-control form-control-sm"
        placeholder="Simptome"
        formControlName="symptoms"
        [class]="isValidField('symptoms')"
        #symptoms
      >
      </textarea>
      <div class="invalid-feedback">
        <span *ngIf="form.get('symptoms').errors?.required">
          Câmpul este obligatoriu!
        </span>
      </div>
    </div>
  </div>

  <div class="form-row">
    <label class="col-md-2 col-form-label form-control-sm">Diagnostic</label>
    <div class="form-group col-md-10">
      <select
        class="form-control form-control-sm"
        placeholder="Diagnostic"
        formControlName="diagnosis"
        [class]="isValidField('diagnosis')"
        #diagnosis
      >
        <option *ngFor="let opt of allDiagnostics" [ngValue]="opt.cod">
          {{ opt.denumire }}
        </option>
      </select>
      <div class="invalid-feedback">
        <span *ngIf="form.get('diagnosis').errors?.required">
          Câmpul este obligatoriu!
        </span>
      </div>
    </div>
  </div>

  <div class="form-row" style="margin-top: 20px">
    <button
      type="submit"
      class="btn btn-success"
      (click)="onSave()"
      [disabled]="form.invalid"
    >
      <span *ngIf="form.get('id').value">Salveaza</span>
      <span *ngIf="!form.get('id').value">Adauga</span>
    </button>
  </div>
</form>
